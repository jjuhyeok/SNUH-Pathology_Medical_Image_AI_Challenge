## 🏆 Result
## 최종 1등
[대회 URL](https://maic.or.kr/competitions/28/share-board/detail/942)

병리영상과 임상정보를 활용한 흑색종 재발 예측 Task

<img width="100%" src="https://github.com/user-attachments/assets/3880ec15-63da-4c30-a0bf-3a206bf35c48"/>



### 02/07에 최종 1등을 발표 받았습니다. 
### 이후 발표 자료나 접근 방법 및 코드에 저작권이 양도되었고
### 병리 관련 데이터는 저작권이 엄격해 이전 대회들과 달리 접근 방법 및 솔루션들 Upload가 불가능하게 되었습니다.


<br>
<br>




주최 : ```서울대학교병원```


* 평가 규칙

1. 정량평가(70점, 총점 중 70%)

        · 정량평가는 AUROC * 50% + AUPRC 50% 구성

2. 정성평가(30점, 총점 중 30%)

        · 정성평가는 아래 5개의 항목에 맞춰 평가를 진행할 예정

        1. 내용의 명확성과 정확성 (10점) - 참가자가 사용한 딥러닝 모델의 선택, 구조, 작동 원리를 얼마나 명확하게 이해하였는지
        2. 독창성, 응용가능성 (5점) - 모델/방법론이 얼마나 창의적이며, 다른 문제나 테스크에 보편적으로 적용할 수 있는지
        3. 팀워크와 협력 (5점) - 팀원 간의 역할 분담과 협력이 잘 이루어졌는지
        4. 질의응답 (5점) - 질무에 대한 이해도와 응답의 정확성, 질문에 대해 신속하게 대응하는 능력
        5. 발표자료 및 발표태도 (5점)






---

## 🔥**대회 접근법**

### 1. **데이터 분석과 문제 정의**
#### 병리 이미지 데이터 분석:
- **H&E 염색**된 병리 이미지를 분석 대상으로 하였으며, 고배율에서는 세포의 세부 구조, 저배율에서는 전체 조직 구조를 확인할 수 있습니다.
- **염색 변형**이 병리학적 정보에 영향을 미칠 수 있어, 이미지 전처리 단계에서 **염색 정규화**와 **다중 배율** 전략을 통해 다양한 특징을 유지하고자 했습니다.

#### 임상 데이터 분석:
- **Tabular 데이터**는 수술 정보, 종양 크기, 전이 여부 등 다양한 임상 정보를 포함합니다.
- 데이터 타입이 혼합된 구조(numerical, categorical, text)여서, **특징 엔지니어링**을 통해 임상적 복잡성을 반영할 수 있도록 했습니다.

### 2. **핵심 학습 전략**
저희는 학습 전략을 세 가지 접근법으로 구성했습니다:
- **모델 접근 (MIL 기반 학습)**
- **이미지 접근 (Multi-scale 및 Feature 추출)**
- **데이터 접근 (정형 데이터 통합)**

#### 2.1 **모델 접근: MIL 기반 학습**
흑색종 재발은 다양한 조직학적 패턴의 상호작용에 의해 발생하므로, **Multiple Instance Learning (MIL)** 기법을 사용했습니다.

- **MHIM-MIL 모델**:
  - **patch masking**을 통해 특정 강한 패턴에 과적합되지 않도록 유도했습니다.
  - 다양한 조직학적 패턴을 학습함으로써, 재발 예측의 정확도를 높였습니다.
- **Attention 기반 학습**:
  - **Softmax Attention** 대신, 다양한 패턴을 반영할 수 있는 **masking** 기법을 추가하여, 더 폭넓은 조직 정보를 학습할 수 있도록 했습니다.

#### 2.2 **이미지 접근: Multi-scale Feature 추출**
- **DINO 기반 Vision Transformer**를 사용해, 다양한 배율의 이미지를 사전 학습했습니다.
  - **Multi-scale 학습**을 통해, 고배율에서는 세포의 세부 구조, 저배율에서는 전체 조직의 패턴을 효과적으로 반영했습니다.
- **Feature Extractor**로서 DINO 모델은 비지도 학습으로 사전 학습되었으며, **조직의 다양한 경계와 패턴**을 인식할 수 있는 특징을 추출했습니다.

#### 2.3 **데이터 접근: 정형 데이터 통합**
- **임상 데이터 분석**을 통해 주요 특징(예: 종양 크기, 전이 비율)을 추출하고, 이를 모델 학습에 반영했습니다.
- **BERT Encoding**을 통해 텍스트 데이터를 정형화하고, **MLP**와 **Embedding Layer**를 사용해 tabular 데이터와 통합했습니다.

### 3. **모델 학습 전략**
- **Patch Masking 학습**: 가장 높은 Attention 점수를 가지는 patch를 masking하여, 다양한 조직학적 패턴을 학습할 수 있도록 유도했습니다.
- **Multi-modal 통합 학습**:
  - 이미지 데이터와 임상 데이터를 통합해, 종합적인 예측 모델을 구축했습니다.
  - Tabular 데이터를 기반으로 한 개인화된 예측을 가능하게 했습니다.

### 4. **평가 및 결과 분석**
- **Ablation Study**:
  1. ViT(DINO)가 기존 ResNet 대비 성능이 우수했음을 확인했습니다.
  2. MHIM-MIL 모델이 DSMIL, TransMIL보다 더 높은 성능을 보였습니다.
- **Heat Map 분석**:
  - 재발 양성 환자의 경우, 표피뿐만 아니라 조직의 중간 부분까지 고려한 특징이 반영됨을 확인했습니다.

### 5. **적용 가능성과 확장성**
- **Patch Masking 전략**: 다양한 암종과 조직학적 예측 모델에 적용할 수 있는 가능성을 제시합니다.
- **Multi-modal 모델**: 병리학 진단서, 의사 소견서 등 다양한 임상 데이터에 확장할 수 있습니다.

### 6. **결과 요약**
- **ViT(DINO)**와 **MHIM-MIL**의 조합이 높은 성능을 보이며, 다양한 조직학적 패턴을 학습할 수 있는 강점이 있었습니다.
- **Patch Masking 기법**과 **Multi-scale Feature 추출** 전략이 이 대회의 차별화된 핵심 접근법입니다.

---

